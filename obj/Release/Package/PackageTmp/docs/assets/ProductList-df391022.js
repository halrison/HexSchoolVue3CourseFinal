import{a as b,s as f,u as C,m as B,c as h,o as N,r as g,d as a,e as n,f as r,g as d,h as t,q as w,z as V,F as u,i as S,v as $,t as i,w as _}from"./index-76d5b82d.js";import{_ as D}from"./ProductCard-eef6ce93.js";import{_ as F}from"./PaginationBar-07a76f54.js";import"./coupons-3eb6210c.js";const M={class:"container"},q={class:"row"},z={class:"col-3 bg-light float-start"},A={class:"position-sticky pt-3"},E=t("p",null,"分類篩選",-1),I=t("option",{selected:"",value:""},"全部",-1),J=t("option",{value:"favorite"},"最愛",-1),O=["value"],R={class:"col-9"},T={class:"card-group row"},U={class:"card-header"},j={class:"card-title"},G={class:"card-body"},H={class:"card-text float-start"},K={class:"card-text float-end"},Q={class:"text-muted"},st={__name:"ProductList",setup(W){const v=b(),{getProducts:p}=v,{products:c,pagination:m}=f(v),{isLoading:y}=f(C()),o=B(""),k=h(()=>{switch(o.value){case"":return c.value;case"favorite":const l=JSON.parse(localStorage.getItem("favorite"))||[];return c.value.filter(e=>l.includes(e.id));default:return c.value.filter(e=>e.category===o.value)}}),x=h(()=>Array.from(new Set(c.value.map(l=>l.category))));return N(async function(){await p(1,"customers"),o.value=""}),(l,e)=>{const L=g("LoadingC"),P=g("router-link");return a(),n(u,null,[r(L,{"is-full-page":!0,active:d(y)},null,8,["active"]),t("div",M,[t("div",q,[t("nav",z,[t("div",A,[E,w(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s)},[I,J,(a(!0),n(u,null,S(x.value,s=>(a(),n("option",{key:s,value:s},i(s),9,O))),128))],512),[[V,o.value]])])]),t("div",R,[t("div",T,[(a(!0),n(u,null,S(k.value,s=>(a(),n("div",{class:"col-4",key:s.id},[r(D,{product:s,class:"mb-3"},{header:_(()=>[t("div",U,[r(P,{class:"text-decoration-none",to:`/product?id=${s.id}`},{default:_(()=>[t("h5",j,i(s.title),1)]),_:2},1032,["to"])])]),body:_(()=>[t("div",G,[t("span",H,"台幣"+i(s.price)+"元",1),t("span",K,[t("small",Q,"剩餘"+i(s.num)+i(s.unit),1)])])]),_:2},1032,["product"])]))),128))])])]),w(r(F,{pagination:d(m),onPaginate:e[1]||(e[1]=s=>d(p)(s,"customer"))},null,8,["pagination"]),[[$,d(m).total_pages>1]])])],64)}}};export{st as default};
