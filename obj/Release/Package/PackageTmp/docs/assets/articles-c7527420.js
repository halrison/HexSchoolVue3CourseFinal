import{a0 as v,s as $,u as p,b as A,m as d,T as c}from"./index-76d5b82d.js";const y=v("articles",()=>{const{isLoading:s}=$(p()),{pushMessage:i}=A(),l=d([]),n=d({}),f=d({});function g(e){c.post("/api/halrison/admin/article",{data:e.value}).then(function(a){a.data.success?i("success",a.data.message):a.data.message.forEach(function(t){i("danger","新增文章失敗",t)})}).catch(function(a){i("danger","新增文章失敗",a==null?void 0:a.message)}).finally(function(){u(1,"admin")})}function m(e){c.put(`/api/halrison/admin/article/${e.value.id}`,{data:e.value}).then(function(a){a.data.success?i("success",a.data.message):a.data.message.forEach(function(t){i("danger","編輯文章失敗",t)})}).catch(function(a){i("danger","編輯文章失敗",a==null?void 0:a.message)}).finally(function(){u(1,"admin")})}function o(e,a){s.value=!0,n.value={},c.get(a==="admin"?`/api/halrison/admin/article/${e}`:`/api/halrison/article/${e}`).then(function(t){t.data.success&&(n.value=t.data.article,n.value.create_at=new Date(n.value.create_at||t.data.article.create_at).toISOString().split("T")[0],s.value=!1)}).catch(function(t){i("danger","取得文章失敗",t==null?void 0:t.message)})}function u(e,a){s.value=!0,l.value=[],c.get(a==="admin"?"/api/halrison/admin/articles":"/api/halrison/articles",{params:{page:e}}).then(function(t){t.data.success&&(l.value=t.data.articles,f.value=t.data.pagination,s.value=!1)}).catch(function(t){i("danger","取得文章失敗",t==null?void 0:t.message)})}function h(e){c.delete(`/api/halrison/admin/article/${e.id}`).then(function(a){a.data.success?i("success",a.data.message):a.data.message.forEach(function(t){i("danger",t)})}).catch(function(a){i("danger","刪除文章失敗",a==null?void 0:a.message)}).finally(function(){u(1,"admin")})}return{article:n,articles:l,pagination:f,addArticle:g,editArticle:m,getArticle:o,getArticles:u,removeArticle:h}});export{y as u};
