import{m as f,o as S,O as V,G as F,r as g,d as r,e as u,h as s,f as e,w as x,t as p,g as d,n as c,P as B,s as M,u as E,F as $,i as N,q as P,v as O,Q as G}from"./index-76d5b82d.js";import{u as D}from"./coupons-3eb6210c.js";import{_ as j}from"./OrderModal-b4fd23ee.js";import{_ as z}from"./PaginationBar-07a76f54.js";const A={class:"modal-dialog",role:"dialog"},Q={class:"modal-header"},R={class:"modal-body"},T={class:"row"},U=s("div",{class:"col"},"付款方式",-1),H={class:"col"},I=s("select",null,[s("option",{disabled:""},"請選擇"),s("option",{value:"credit-card"},"信用卡"),s("option",{value:"bank-account"},"銀行帳戶"),s("option",{value:"mobile-pay"},"行動支付")],-1),J={key:0},K={class:"row"},W=s("div",{class:"col"},"發卡銀行",-1),X={class:"col"},Y={class:"row"},Z=s("div",{class:"col"},"卡號",-1),ss={class:"col"},es={class:"row"},ls=s("div",{class:"col"},"持有人",-1),as={class:"col"},os={class:"row"},cs=s("div",{class:"col"},"效期",-1),ts={class:"col"},is={class:"row"},ns=s("div",{class:"col"},"檢核碼",-1),ds={class:"col"},rs={key:1},us={class:"row"},_s=s("div",{class:"col"},"開戶總行",-1),vs={class:"col"},ms={class:"row"},hs=s("div",{class:"col"},"開戶分行",-1),ps={class:"col"},fs={class:"row"},bs=s("div",{class:"col"},"帳號",-1),ks={class:"col"},ys={class:"row"},ws=s("div",{class:"col"},"戶名",-1),gs={class:"col"},qs={class:"row"},Cs=s("div",{class:"col"},"一次性密碼",-1),xs={class:"col"},Ms={key:2},$s={class:"row"},Ps=s("div",{class:"col"},"支付服務",-1),Os={class:"col"},Ss={class:"form-check"},Ds=s("label",{class:"form-check-label"},"Line Pay",-1),Ls={class:"form-check"},Vs=s("label",{class:"form-check-label"},"Apple Pay",-1),Fs={class:"form-check"},Bs=s("label",{class:"form-check-label"},"Samsung Pay",-1),Es={class:"form-check"},Ns=s("label",{class:"form-check-label"},"Google Pay",-1),Gs={class:"form-check"},js=s("label",{class:"form-check-label"},"街口支付",-1),zs={class:"row"},As=s("div",{class:"col"},"付款代碼",-1),Qs={class:"col"},Rs={class:"row"},Ts=s("div",{class:"col"},"付款密碼",-1),Us={class:"col"},Hs=s("input",{type:"submit",class:"btn btn-primary",value:"確定"},null,-1),Is={__name:"PayModal",props:["order"],setup(C,{expose:b}){const t=D(),_=f(null),i=f(""),k=C;let v;S(function(){v=new V(_.value)}),F(()=>k.order,function(h){t.order=h}),b({show:y});function y(){v.show()}function m(){v.hide()}function w(){t.payOrder(),t.getOrders(),t.order={},m()}return(h,n)=>{const a=g("FieldC"),l=g("ErrorMessage"),q=g("FormC");return r(),u("div",{class:"modal fade",ref_key:"DOM",ref:_},[s("div",A,[e(q,{class:"modal-content",onSubmit:w},{default:x(({errors:o})=>[s("div",Q,"訂單編號："+p(d(t).order.id),1),s("div",R,[s("div",T,[U,s("div",H,[e(a,{label:"付款方式",name:"method",rules:"required",class:c(["form-select",{"is-invalid":o.method}]),modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=L=>i.value=L)},{default:x(()=>[I]),_:2},1032,["modelValue","class"]),e(l,{name:"method",class:"invalid-feedback"})])]),i.value==="credit-card"?(r(),u("div",J,[s("div",K,[W,s("div",X,[e(a,{label:"發卡銀行",name:"bank",class:c(["form-control",{"is-invalid":o.bank}]),type:"text",rules:"required"},null,8,["class"]),e(l,{name:"bank",class:"invalid-feedback"})])]),s("div",Y,[Z,s("div",ss,[e(a,{label:"卡號",name:"number",class:c(["form-control",{"is-invalid":o.number}]),type:"tel",rules:"required|numeric"},null,8,["class"]),e(l,{name:"number",class:"invalid-feedback"})])]),s("div",es,[ls,s("div",as,[e(a,{label:"持有人",name:"owner",class:c(["form-control",{"is-invalid":o.owner}]),type:"text",rules:"required"},null,8,["class"]),e(l,{name:"owner",class:"invalid-feedback"})])]),s("div",os,[cs,s("div",ts,[e(a,{label:"效期",name:"valid-thru",class:c(["form-control",{"is-invalid":o["valid-thru"]}]),type:"month",rules:"required"},null,8,["class"]),e(l,{name:"valid-thru",class:"invalid-feedback"})])]),s("div",is,[ns,s("div",ds,[e(a,{label:"檢核碼",name:"checksum",class:c(["form-control",{"is-invalid":o.checksum}]),type:"tel",rules:"required|numeric"},null,8,["class"]),e(l,{name:"checksum",class:"invalid-feedback"})])])])):i.value==="bank-account"?(r(),u("div",rs,[s("div",us,[_s,s("div",vs,[e(a,{label:"開戶總行",name:"head-office",class:c(["form-control",{"is-invalid":o["head-office"]}]),type:"text",rules:"required"},null,8,["class"]),e(l,{name:"head-office",class:"invalid-feedback"})])]),s("div",ms,[hs,s("div",ps,[e(a,{label:"開戶分行",name:"branch",class:c(["form-control",{"is-invalid":o.branch}]),type:"text",rules:"required"},null,8,["class"]),e(l,{name:"branch",class:"invalid-feedback"})])]),s("div",fs,[bs,s("div",ks,[e(a,{label:"帳號",name:"account",class:c(["form-control",{"is-invalid":o.account}]),type:"tel",rules:"required|numeric"},null,8,["class"]),e(l,{name:"account",class:"invalid-feedback"})])]),s("div",ys,[ws,s("div",gs,[e(a,{label:"戶名",name:"name",class:c(["form-control",{"is-invalid":o.name}]),type:"text",rules:"required"},null,8,["class"]),e(l,{name:"name",class:"invalid-feedback"})])]),s("div",qs,[Cs,s("div",xs,[e(a,{label:"一次性密碼",name:"otp",class:c(["form-control",{"is-invalid":o.otp}]),type:"tel",rules:"required|numeric"},null,8,["class"]),e(l,{name:"otp",class:"invalid-feedback"})])])])):i.value==="mobile-pay"?(r(),u("div",Ms,[s("div",$s,[Ps,s("div",Os,[s("div",Ss,[e(a,{label:"支付服務",name:"service",class:c(["form-check-input",{"is-invalid":o.service}]),type:"radio",rules:"required",value:"linePay"},null,8,["class"]),Ds]),s("div",Ls,[e(a,{label:"支付服務",name:"service",class:c(["form-check-input",{"is-invalid":o.service}]),type:"radio",rules:"required",value:"applePay"},null,8,["class"]),Vs]),s("div",Fs,[e(a,{label:"支付服務",name:"service",class:c(["form-check-input",{"is-invalid":o.service}]),type:"radio",rules:"required",value:"samsungPay"},null,8,["class"]),Bs]),s("div",Es,[e(a,{label:"支付服務",name:"service",class:c(["form-check-input",{"is-invalid":o.service}]),type:"radio",rules:"required",value:"googlePay"},null,8,["class"]),Ns]),s("div",Gs,[e(a,{label:"支付服務",name:"service",class:c(["form-check-input",{"is-invalid":o.service}]),type:"radio",rules:"required",value:"jkopay"},null,8,["class"]),js]),e(l,{name:"service",class:"invalid-feedback"})])]),s("div",zs,[As,s("div",Qs,[e(a,{label:"付款代碼",name:"code",class:c(["form-control",{"is-invalid":o.code}]),type:"tel",rules:"required|numeric"},null,8,["class"]),e(l,{name:"code",class:"invalid-feedback"})])]),s("div",Rs,[Ts,s("div",Us,[e(a,{label:"付款密碼",name:"password",class:c(["form-control",{"is-invalid":o.password}]),type:"password",rules:"required|numeric"},null,8,["class"]),e(l,{name:"password",class:"invalid-feedback"})])])])):B("",!0)]),s("div",{class:"modal-footer"},[Hs,s("input",{type:"reset",class:"btn btn-danger",onClick:m,value:"取消"})])]),_:1})])],512)}}},Js={class:"table-responsive"},Ks={class:"table table-striped table-sm"},Ws=s("thead",null,[s("tr",null,[s("th",null,"訂單編號"),s("th",null,"建立日期"),s("th",null,"付款日期"),s("th",{class:"text-end"},"付款金額"),s("th",null,"動作")])],-1),Xs={class:"text-end"},Ys={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},Zs=["onClick"],se=["onClick"],ce={__name:"OrderView",setup(C){const b=f(null),t=f(null),_=f({}),{isLoading:i}=M(E()),k=D(),{getOrders:v}=k,{orders:y,pagination:m}=M(k);S(function(){v(1,"user")});function w(h,n){_.value=y.value.find(a=>a.id===n),h==="view"?b.value.show():t.value.show()}return(h,n)=>{const a=g("LoadingC");return r(),u($,null,[e(a,{"is-full-page":!0,active:d(i)},null,8,["active"]),s("div",Js,[s("table",Ks,[Ws,s("tbody",null,[(r(!0),u($,null,N(d(y),l=>(r(),u("tr",{key:l.num},[s("td",null,p(l.id),1),s("td",null,p(new Date(l.create_at*1e3).toLocaleDateString()),1),s("td",null,p(l.paid_date?new Date(l.paid_date*1e3).toLocaleDateString():"尚未付款"),1),s("td",Xs,p(d(G)(l.total)),1),s("td",null,[s("div",Ys,[s("button",{class:"btn btn-outline-primary",onClick:q=>w("view",l.id)},"檢視",8,Zs),P(s("button",{class:"btn btn-outline-info",onClick:q=>w("pay",l.id)},"付款",8,se),[[O,!l.paid_date]])])])]))),128))])]),P(e(z,{pagination:d(m),onPaginate:n[0]||(n[0]=l=>d(v)(l,"user"))},null,8,["pagination"]),[[O,d(m).total_pages>1]]),e(j,{order:_.value,type:"user",ref_key:"viewModal",ref:b},null,8,["order"]),e(Is,{order:_.value,ref_key:"payModal",ref:t},null,8,["order"])])],64)}}};export{ce as default};
