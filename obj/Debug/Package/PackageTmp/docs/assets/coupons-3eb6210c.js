import{a0 as $,m as l,b as y,s as O,u as C,T as i}from"./index-76d5b82d.js";const L=$("orders",()=>{const h=l([]),u=l({}),o=l({}),s=l({}),{pushMessage:t}=y(),{isLoading:g}=O(C());function v(n,c){i.post("/api/halrison/order/",{data:{user:n,message:c}}).then(function(d){d.data.success&&(o.value=n,t("success",d.data.message))}).catch(function(d){t("danger","新增訂單失敗",d==null?void 0:d.message)})}function m(){u.value.user=o.value,i.put(`/api/halrison/admin/order/${u.value.id}`,{data:u.value}).then(function(n){n.data.success?t("success",n.data.message):n.data.message.forEach(function(c){t("danger","更改訂單失敗",c)})}).catch(function(n){t("danger","更改訂單失敗",n==null?void 0:n.message)}).finally(function(){e(1,"admin")})}function p(n){u.value={},g.value=!0,i.get(`/api/halrison/order/${n}`).then(function(c){c.data.success&&(u.value=c.data.order,o.value=c.data.order.user,g.value=!1)}).catch(function(c){t("danger","取得訂單失敗",c==null?void 0:c.message)})}function e(n,c){h.value=[],g.value=!0,s.value={},i.get(c==="admin"?"/api/halrison/admin/orders":"/api/halrison/orders",{params:{page:n}}).then(function(d){d.data.success&&(h.value=d.data.orders,s.value=d.data.pagination,g.value=!1)})}function a(){i.post(`/api/halrison/pay/${u.value.id}`).then(function(n){n.data.success?t("success",n.data.message):t("danger","付款失敗")})}function f(){i.delete(`/api/halrison/admin/order/${u.value.id}`).then(function(n){n.data.success?t("success","移除訂單成功",n.data.message):t("danger","移除訂單失敗",n.data.message)}).catch(function(n){t("danger","移除訂單失敗",n==null?void 0:n.message)}).finally(function(){e(1,"admin")})}function S(){i.delete("/api/halrison/admin/orders/all").then(function(n){n.data.success?t("success","移除訂單成功",n.data.message):t("danger","移除訂單失敗",n.data.message)}).catch(function(n){t("danger","移除訂單失敗",n==null?void 0:n.message)}).finally(function(){e(1,"admin")})}return{order:u,orders:h,pagination:s,user:o,addOrder:v,editOrder:m,getOrder:p,getOrders:e,payOrder:a,removeOrder:f,removeOrders:S}}),M=$("coupon",()=>{const h=l({}),u=l([]),o=l({}),{pushMessage:s}=y(),{isLoading:t}=O(C());function g(e){i.post("/api/halrison/admin/coupon",{data:e.value}).then(function(a){a.data.success?s("success","新增優惠券成功",a.data.message):a.data.message.forEach(function(f){s("danger","新增優惠券失敗",f)})}).catch(function(a){s("danger","新增優惠券失敗",a==null?void 0:a.message)}).finally(function(){m(1)})}function v(e){i.put(`/api/halrison/admin/coupon/${e.value.id}`,{data:e.value}).then(function(a){a.data.success?s("success","修改優惠券成功",a.data.message):a.data.message.forEach(function(f){s("danger","修改優惠券失敗",f)})}).catch(function(a){s("danger","修改優惠券失敗",a==null?void 0:a.message)}).finally(function(){m(1)})}function m(e){t.value=!0,o.value={},u.value=[],i.get("/api/halrison/admin/coupons",{param:{page:e}}).then(function(a){a.data.success&&(u.value=a.data.coupons,o.value=a.data.pagination)}).catch(function(a){s("danger","取得優惠券失敗",a==null?void 0:a.message)}).finally(function(){t.value=!1})}function p(e){i.delete(`/api/halrison/admin/coupon/${e.value.id}`).then(function(a){a.data.success?s("success","移除優惠券成功",a.data.message):a.data.message.forEach(function(f){s("danger","移除優惠券失敗",f)})}).catch(function(a){s("danger","移除優惠券失敗",a==null?void 0:a.message)}).finally(function(){m(1)})}return{coupon:h,coupons:u,pagination:o,addCoupon:g,editCoupon:v,getCoupons:m,removeCoupon:p}});export{M as a,L as u};
