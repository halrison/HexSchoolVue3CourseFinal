import{m as a,s as k,u as w,o as L,r as M,d as m,e as p,f as s,g as o,h as t,F as y,i as S,q as D,v as $,t as l}from"./index-76d5b82d.js";import{_ as B}from"./OrderModal-b4fd23ee.js";import{_ as O}from"./RemoveModal-8875dbfd.js";import{_ as F}from"./PaginationBar-07a76f54.js";import{u as N}from"./coupons-3eb6210c.js";import"./articles-c7527420.js";const V={class:"table"},q=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",null,"建立日期"),t("th",null,"付款日期"),t("th",{class:"text-end"},"付款金額"),t("th",{class:"text-center"},"動作")])],-1),E=["textContent"],P={class:"text-end"},R={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},T=["onClick"],j=["onClick"],Q={__name:"OrderManage",setup(z){const f=a(null),i=a(null),r=a(""),d=a({}),v=N(),{getOrders:g}=v,{orders:h,pagination:b}=k(v),{isLoading:C}=k(w());L(function(){g(1,"admin")});function u(c,n=""){d.value=h.value.find(_=>_.id===n)||{},c==="edit"?f.value.show():c==="remove"?(r.value="單一訂單",i.value.show()):(r.value="所有訂單",i.value.show())}return(c,n)=>{const _=M("LoadingC");return m(),p(y,null,[s(_,{"is-full-page":!0,active:o(C)},null,8,["active"]),t("button",{class:"btn btn-danger float-end",onClick:n[0]||(n[0]=e=>u("clear"))},"刪除所有訂單"),t("table",V,[q,t("tbody",null,[(m(!0),p(y,null,S(o(h),e=>(m(),p("tr",{key:e.num},[t("td",null,l(e.id),1),t("td",null,l(new Date(e.create_at*1e3).toLocaleDateString()),1),t("td",null,l(e.paid_date?new Date(e.paid_date*1e3).toLocaleDateString():"尚未付款"),1),t("td",{class:"text-end",textContent:l(e.total)},null,8,E),t("td",P,[t("div",R,[t("button",{class:"btn btn-outline-primary",onClick:x=>u("edit",e.id)},"編輯",8,T),t("button",{class:"btn btn-outline-danger",onClick:x=>u("remove",e.id)},"移除",8,j)])])]))),128))])]),D(s(F,{pagination:o(b),onPaginate:n[1]||(n[1]=e=>o(g)(e,"admin"))},null,8,["pagination"]),[[$,o(b).total_pages>1]]),s(B,{order:d.value,type:"admin",ref_key:"editModal",ref:f},null,8,["order"]),s(O,{item:d.value,type:r.value,ref_key:"removeModal",ref:i},null,8,["item","type"])],64)}}};export{Q as default};
